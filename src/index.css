@import "tailwindcss";

@layer base {
  body {
    @apply bg-slate-50 text-slate-900 antialiased dark:bg-slate-950 dark:text-slate-50 selection:bg-blue-100 selection:text-blue-900 dark:selection:bg-blue-900 dark:selection:text-blue-100;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-slate-300 dark:bg-slate-700 rounded-full border-2 border-transparent bg-clip-content hover:bg-slate-400 dark:hover:bg-slate-600;
  }
}

@layer components {

  /* Layout Components */
  .sidebar {
    @apply w-64 bg-white border-r border-slate-200 flex flex-col shrink-0 transition-all duration-300 dark:bg-slate-950 dark:border-slate-800 z-40;
  }

  .sidebar-header {
    @apply p-6 flex items-center gap-3;
  }

  .sidebar-logo {
    @apply flex items-center gap-3;
  }

  .sidebar-logo-text {
    @apply text-slate-900 dark:text-white;
  }

  .sidebar-nav {
    @apply flex-1 px-3 py-4 flex flex-col gap-1 overflow-y-auto;
  }

  .sidebar-nav-item {
    @apply flex items-center gap-3 px-3 py-2.5 text-slate-600 text-sm font-medium rounded-lg transition-all duration-200 hover:bg-slate-100 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white cursor-pointer select-none;
  }

  .sidebar-nav-item.active {
    @apply bg-blue-50 text-blue-700 shadow-sm dark:bg-blue-900/20 dark:text-blue-400;
  }

  /* Main Content */
  .main-content {
    @apply flex-1 flex flex-col overflow-hidden bg-slate-50 dark:bg-slate-950 relative;
  }

  .page-header {
    @apply px-8 py-5 bg-white/80 backdrop-blur-md border-b border-slate-200 flex justify-between items-center sticky top-0 z-30 transition-all dark:bg-slate-950/80 dark:border-slate-800;
  }

  .page-title {
    @apply text-xl font-bold text-slate-800 tracking-tight dark:text-white;
  }

  .page-body {
    @apply flex-1 overflow-y-auto p-6 md:p-8 scroll-smooth;
  }

  /* Cards */
  .card {
    @apply bg-white rounded-xl shadow-sm border border-slate-200 dark:bg-slate-900 dark:border-slate-800 transition-all duration-200 hover:shadow-md;
  }

  .card-header {
    @apply px-6 py-4 border-b border-slate-100 flex justify-between items-center dark:border-slate-800;
  }

  .card-title {
    @apply text-base font-semibold text-slate-800 dark:text-slate-200;
  }

  .card-body {
    @apply p-6;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed active:scale-95;
  }

  .btn-primary {
    @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-md shadow-blue-500/20 hover:shadow-lg hover:shadow-blue-500/30;
  }

  .btn-accent {
    @apply bg-emerald-600 text-white hover:bg-emerald-700 focus:ring-emerald-500 shadow-md shadow-emerald-500/20 hover:shadow-lg hover:shadow-emerald-500/30;
  }

  .btn-outline {
    @apply bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 hover:text-blue-600 hover:border-blue-200 shadow-sm dark:bg-transparent dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800;
  }

  .btn-ghost {
    @apply bg-transparent text-slate-600 hover:bg-slate-100 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200;
  }

  .btn-danger {
    @apply bg-red-50 text-red-600 border border-red-100 hover:bg-red-100 hover:border-red-200 focus:ring-red-500 dark:bg-red-900/20 dark:border-red-900/50 dark:text-red-400 dark:hover:bg-red-900/40;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  /* Form Elements */
  .form-group {
    @apply mb-4 relative;
  }

  .form-label {
    @apply block text-sm font-medium text-slate-700 mb-1.5 dark:text-slate-300 ml-1;
  }

  .form-input,
  .form-select,
  .form-textarea {
    @apply w-full px-4 py-2.5 text-sm text-slate-900 bg-white border border-slate-300 rounded-lg transition-all duration-200 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 placeholder:text-slate-400 hover:border-slate-400 dark:bg-slate-900 dark:border-slate-700 dark:text-white dark:focus:ring-blue-500/20 dark:hover:border-slate-600;
  }

  .form-input:disabled {
    @apply bg-slate-50 text-slate-500 cursor-not-allowed dark:bg-slate-800 dark:text-slate-500;
  }

  .input-group {
    @apply relative;
  }

  .input-group .form-input {
    @apply pl-10;
  }

  .input-group-icon {
    @apply absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none;
  }

  .form-error {
    @apply text-xs text-red-500 mt-1.5 ml-1 flex items-center gap-1;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold tracking-wide uppercase;
  }

  .badge-primary {
    @apply bg-blue-50 text-blue-700 border border-blue-100 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800;
  }

  /* Modal */
  .modal-overlay {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm transition-opacity duration-300;
    animation: fade-in 0.3s ease-out forwards;
  }

  .modal {
    @apply w-full max-w-lg bg-white rounded-xl shadow-2xl border border-slate-200 dark:bg-slate-900 dark:border-slate-700 flex flex-col max-h-[90vh] transition-all duration-300;
    animation: zoom-in-95 0.3s ease-out forwards;
  }

  /* Animations */
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-up {
    from { transform: translateY(10px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  @keyframes zoom-in-95 {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out forwards;
  }

  .animate-slide-up {
    animation: slide-up 0.4s ease-out forwards;
  }

  .animate-zoom-in {
    animation: zoom-in-95 0.1s ease-out forwards;
  }
}

/* Specific Component Styles */

/* Filling Page Layout */
.filling-layout {
  display: grid;
  grid-template-columns: minmax(400px, 45%) 1fr;
  gap: 2rem;
  height: 100%;
}

.expanded-preview .filling-layout {
  display: block;
}

.filling-preview {
  @apply bg-slate-100 rounded-xl border border-slate-200 overflow-hidden flex flex-col dark:bg-slate-900/50 dark:border-slate-800 shadow-inner transition-all duration-300;
}

.preview-header {
  @apply px-4 py-3 bg-white border-b border-slate-200 flex justify-between items-center dark:bg-slate-900 dark:border-slate-800 shadow-sm z-10;
}

.preview-canvas {
  @apply flex-1 overflow-auto p-8 flex items-center justify-center relative;
  background-image: radial-gradient(#cbd5e1 1px, transparent 1px);
  background-size: 24px 24px;
}

.preview-image-container {
  @apply relative shadow-2xl bg-white transition-transform duration-200 ease-out;
}

.preview-frame {
  @apply absolute overflow-hidden flex items-center transition-all duration-200;
}

/* Autocomplete */
.autocomplete-container {
  @apply relative;
}

.autocomplete-dropdown {
  @apply absolute top-full left-0 right-0 z-50 mt-1 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-xl dark:bg-slate-800 dark:border-slate-700;
  animation: zoom-in-95 0.1s ease-out forwards;
}

.autocomplete-item {
  @apply px-4 py-3 cursor-pointer transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50 border-b border-slate-50 last:border-0 dark:border-slate-700/50 flex flex-col;
}

/* Designer Specifics */
.designer-layout {
  display: grid;
  grid-template-columns: 1fr 340px;
  gap: 1.5rem;
  height: calc(100vh - 180px);
}

.designer-canvas-container {
  @apply bg-slate-100 rounded-xl overflow-hidden p-6 relative dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 flex flex-col;
  background-image: radial-gradient(#cbd5e1 1px, transparent 1px);
  background-size: 20px 20px;
}

.designer-canvas {
  @apply relative shadow-lg bg-white mx-auto my-auto transition-transform duration-200;
}

.designer-frame {
  @apply absolute border border-blue-400/50 bg-blue-400/10 cursor-move transition-all duration-150 hover:bg-blue-400/20 hover:border-blue-500;
}

.designer-frame.selected {
  @apply border-emerald-500 border-2 z-20 shadow-lg shadow-emerald-500/10;
}

.designer-frame-label {
  @apply absolute -top-6 left-0 text-[10px] font-bold uppercase tracking-wider bg-blue-600 text-white px-2 py-0.5 rounded shadow-sm whitespace-nowrap z-30 pointer-events-none;
}

.designer-frame.selected .designer-frame-label {
  @apply bg-emerald-600;
}

.designer-properties {
  @apply bg-white border border-slate-200 rounded-xl flex flex-col overflow-hidden dark:bg-slate-900 dark:border-slate-800 shadow-sm;
}

.properties-header {
  @apply p-4 border-b border-slate-100 bg-slate-50/50 dark:bg-slate-900 dark:border-slate-800;
}

.properties-title {
  @apply text-sm font-bold text-slate-800 dark:text-slate-200 uppercase tracking-wide flex items-center gap-2;
}

.properties-body {
  @apply p-4 overflow-y-auto flex-1 flex flex-col;
}

/* Toggle Switch */
.toggle {
  @apply relative inline-block w-11 h-6 shrink-0;
}

.toggle input {
  @apply opacity-0 w-0 h-0;
}

.toggle-slider {
  @apply absolute cursor-pointer inset-0 bg-slate-200 transition-all duration-300 rounded-full dark:bg-slate-700 border border-transparent;
}

.toggle-slider:before {
  @apply absolute content-[''] h-4 w-4 left-1 bottom-1 bg-white transition-all duration-300 rounded-full shadow-sm;
}

.toggle input:checked+.toggle-slider {
  @apply bg-blue-600;
}

.toggle input:checked+.toggle-slider:before {
  @apply translate-x-5;
}

/* Resize Handles */
.designer-frame-handle {
  @apply absolute w-2.5 h-2.5 bg-white border border-emerald-500 rounded-full z-30 shadow-sm transition-transform hover:scale-125;
}
.designer-frame-handle.nw { top: -5px; left: -5px; cursor: nw-resize; }
.designer-frame-handle.n { top: -5px; left: 50%; transform: translateX(-50%); cursor: n-resize; }
.designer-frame-handle.ne { top: -5px; right: -5px; cursor: ne-resize; }
.designer-frame-handle.e { top: 50%; right: -5px; transform: translateY(-50%); cursor: e-resize; }
.designer-frame-handle.se { bottom: -5px; right: -5px; cursor: se-resize; }
.designer-frame-handle.s { bottom: -5px; left: 50%; transform: translateX(-50%); cursor: s-resize; }
.designer-frame-handle.sw { bottom: -5px; left: -5px; cursor: sw-resize; }
.designer-frame-handle.w { top: 50%; left: -5px; transform: translateY(-50%); cursor: w-resize; }

/* Responsive Overrides */
@media (max-width: 1024px) {
  .filling-layout {
    grid-template-columns: 1fr;
  }
  .filling-preview {
    height: 500px; /* Fallback for mobile */
  }
  .filling-preview.sticky {
    position: relative;
    top: 0;
  }
}
